"use strict";(self.webpackChunkreact_map_widgets=self.webpackChunkreact_map_widgets||[]).push([[739,2945],{60239:(e,r,a)=>{a.d(r,{N:()=>w,populateOperationalLayers:()=>L});var t=a(19276),i=(a(81806),a(77491)),n=a(62487),y=a(70652);function o(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}var l=a(2487),c=a(81589);async function L(e,r,a){if(!r)return;const t=r.map((e=>async function(e,r){return async function(e,r,a){const t=new e;return t.read(r,a.context),"group"===t.type&&("GroupLayer"===r.layerType?await w(t,r,a):M(r)?function(e,r,a){r.itemId&&(e.portalItem=new y.default({id:r.itemId,portal:null===a||void 0===a?void 0:a.portal}),e.when((()=>{var t,i;const n=t=>{var i;const n=t.layerId;b(t,e,r,n,a);const y=null===(i=r.featureCollection)||void 0===i||null===(i=i.layers)||void 0===i?void 0:i[n];y&&t.read(y,a)};null!==(t=e.layers)&&void 0!==t&&t.forEach(n),null===(i=e.tables)||void 0===i||i.forEach(n)})))}(t,r,a.context):G(r)&&await async function(e,r,a){var t;const i=n.S.FeatureLayer,y=await i(),o=r.featureCollection,l=null===o||void 0===o?void 0:o.showLegend,c=null===o||void 0===o||null===(t=o.layers)||void 0===t?void 0:t.map(((t,i)=>{const n=new y;n.read(t,a);const o={...a,ignoreDefaults:!0};return b(n,e,r,i,o),null!=l&&n.read({showLegend:l},o),n}));e.layers.addMany(null!==c&&void 0!==c?c:[])}(t,r,a.context)),await(0,c.L)(t,a.context),t}(await m(e,r),e,r)}(e,a))),i=await Promise.allSettled(t);for(const n of i)"rejected"===n.status||n.value&&e.add(n.value)}const s={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},u={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},d={ArcGISFeatureLayer:"FeatureLayer"},S={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},p={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",KnowledgeGraphLayer:"UnsupportedLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},v={ArcGISFeatureLayer:"FeatureLayer",SubtypeGroupTable:"UnsupportedLayer"},I={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},f={...p,LinkChartLayer:"LinkChartLayer"},g={...v},T={...I};async function m(e,r){var a,t;const c=r.context,L=A(c);let s=e.layerType||e.type;!s&&(null===r||void 0===r?void 0:r.defaultLayerType)&&(s=r.defaultLayerType);const u=L[s];let d=u?n.S[u]:n.S.UnknownLayer;if(M(e)){const r=null===c||void 0===c?void 0:c.portal;if(e.itemId){const a=new y.default({id:e.itemId,portal:r});await a.load();const t=(await(0,l.n)(a,new i.v)).className||"UnknownLayer";d=n.S[t]}}else"ArcGISFeatureLayer"===s?function(e){return o(e,"notes")}(e)||function(e){return o(e,"markup")}(e)?d=n.S.MapNotesLayer:function(e){return o(e,"route")}(e)?d=n.S.RouteLayer:G(e)&&(d=n.S.GroupLayer):null!==(a=e.wmtsInfo)&&void 0!==a&&a.url&&e.wmtsInfo.layerIdentifier?d=n.S.WMTSLayer:"WFS"===s&&"2.0.0"!==(null===(t=e.wfsInfo)||void 0===t?void 0:t.version)&&(d=n.S.UnsupportedLayer);return d()}function G(e){var r,a;return"ArcGISFeatureLayer"===e.layerType&&!M(e)&&(null!==(r=null===(a=e.featureCollection)||void 0===a||null===(a=a.layers)||void 0===a?void 0:a.length)&&void 0!==r?r:0)>1}function M(e){return"Feature Collection"===e.type}function A(e){let r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=S;break;case"ground":r=u;break;case"tables":r=d;break;default:r=s}break;case"link-chart":switch(e.layerContainerType){case"basemap":r=T;break;case"tables":r=g;break;default:r=f}break;default:switch(e.layerContainerType){case"basemap":r=I;break;case"tables":r=v;break;default:r=p}}return r}async function w(e,r,a){const i=new t.A,n=L(i,Array.isArray(r.layers)?r.layers:[],a);try{try{if(await n,"group"===e.type)return e.layers.addMany(i),e}catch(y){e.destroy();for(const e of i)e.destroy();throw y}}catch(y){throw y}}function b(e,r,a,t,i){var n,y;e.read({id:"".concat(r.id,"-sublayer-").concat(t),visibility:null===(n=null===(y=a.visibleLayers)||void 0===y?void 0:y.includes(t))||void 0===n||n},i)}},72945:(e,r,a)=>{a.d(r,{It:()=>u,LG:()=>y,OM:()=>c,Y:()=>o,bK:()=>l,mm:()=>s,sQ:()=>L});var t=a(9624),i=a(13312),n=a(45417);function y(e,r){if(!o(e,r)){const a=e.typeKeywords;a?a.push(r):e.typeKeywords=[r]}}function o(e,r){var a;return!(null===(a=e.typeKeywords)||void 0===a||!a.includes(r))}function l(e){return o(e,s.HOSTED_SERVICE)}function c(e,r){const a=e.typeKeywords;if(a){const e=a.indexOf(r);e>-1&&a.splice(e,1)}}async function L(e){const r=e.clone().normalize();let a;if(r.length>1)for(const t of r)a?t.width>a.width&&(a=t):a=t;else a=r[0];return async function(e){const r=e.spatialReference;if(r.isWGS84)return e.clone();if(r.isWebMercator)return(0,n.ci)(e);const a=i.A.WGS84;return await(0,t.initializeProjection)(r,a),(0,t.project)(e,a)}(a)}const s={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function u(e){var r;const{portal:a,isOrgItem:t,itemControl:i}=e,n=null===(r=a.user)||void 0===r?void 0:r.privileges;let y=!n||n.includes("features:user:edit"),o=!!t&&!(null===n||void 0===n||!n.includes("features:user:fullEdit"));const l="update"===i||"admin"===i;return l?o=y=!0:o&&(y=!0),{features:{edit:y,fullEdit:o},content:{updateItem:l}}}},81589:(e,r,a)=>{a.d(r,{L:()=>y});var t=a(98773),i=a(50346),n=a(62754);async function y(e,r,a){const y=e&&e.getAtOrigin&&e.getAtOrigin("renderer",r.origin);if(y&&"unique-value"===y.type&&y.styleOrigin){const o=await(0,t.Ke)(y.populateFromStyle());if((0,i.Te)(a),!1===o.ok){const a=o.error;null!==r&&void 0!==r&&r.messages&&r.messages.push(new n.A("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(a.message),{error:a,context:r})),e.clear("renderer",null===r||void 0===r?void 0:r.origin)}}}}}]);
//# sourceMappingURL=739.093858fe.chunk.js.map